<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let myObj = {
        key: "value",
        otherKey: 99,
      };

      let myObj_serialized = JSON.stringify(myObj);

      localStorage.setItem("myObj", myObj_serialized);

      let myObj_deserialized = JSON.parse(localStorage.getItem(myObj));
    </script>
  </body>
</html> -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic Background Color</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        height: 100vh; /* Ensure body fills the viewport height */
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        font-family: Arial, sans-serif;
        transition: background-color 0.5s ease; /* Smooth transition for background color change */
      }
      #image-container {
        display: none; /* Hide the image container initially */
      }
    </style>
  </head>
  <body>
    <div id="image-container">
      <img id="image" src="ykDt4Wd.jpg" alt="Image" />
    </div>
    <h1>Dynamic Background Color</h1>

    <script>
      window.addEventListener("DOMContentLoaded", function () {
        // Get the image element
        const image = document.getElementById("image");

        // Create a canvas element
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");

        // When the image is loaded, draw it onto the canvas
        image.onload = function () {
          canvas.width = image.width;
          canvas.height = image.height;
          ctx.drawImage(image, 0, 0, image.width, image.height);

          // Get the dominant color of the image
          const dominantColor = getDominantColor(ctx);

          // Set the background color of the body
          document.body.style.backgroundColor = dominantColor;
        };

        // Function to get the dominant color of the image
        function getDominantColor(context) {
          const imageData = context.getImageData(
            0,
            0,
            canvas.width,
            canvas.height
          );
          const colorMap = {};

          // Convert image data to RGB format
          const rgbData = convertToRGB(imageData);

          // Count occurrences of each color
          for (let i = 0; i < rgbData.length; i += 3) {
            const r = rgbData[i];
            const g = rgbData[i + 1];
            const b = rgbData[i + 2];
            const color = `rgb(${r},${g},${b})`;
            colorMap[color] = (colorMap[color] || 0) + 1;
          }

          // Find the color with the highest occurrence
          let maxCount = 0;
          let dominantColor = "white"; // Default color
          for (const color in colorMap) {
            if (colorMap[color] > maxCount) {
              maxCount = colorMap[color];
              dominantColor = color;
            }
          }

          return dominantColor;
        }

        // Function to convert image data to RGB format
        function convertToRGB(imageData) {
          const rgbData = [];
          for (let i = 0; i < imageData.data.length; i += 4) {
            // Extract RGB components from RGBA format
            const r = imageData.data[i];
            const g = imageData.data[i + 1];
            const b = imageData.data[i + 2];
            // Add RGB components to the new array
            rgbData.push(r, g, b);
          }
          return rgbData;
        }
      });
    </script>
    <!-- Include your JavaScript file -->
  </body>
</html>
